<%= simple_form_for @avaliation, html: { class: "smart-form" } do |f| %>
  <%= f.error_notification %>

  <fieldset>
      <div class="row">
        <div class="col col-sm-4">
          <%= f.association :test_setting, as: :select2, elements: @test_settings, hide_empty_element: true, input_html: { data: { hide_empty_element: true } } %>
        </div>
      </div>

    <div class="row">
      <div class="col col-sm-4">
        <%= f.association :unity, as: :select2, elements: unities, readonly: !current_user.admin? %>
      </div>

      <div class="col col-sm-4">
        <%= f.association :classroom, as: :select2, elements: @classrooms %>
      </div>

      <div class="col col-sm-4">
        <%= f.association :discipline, as: :select2, elements: @disciplines %>
      </div>
    </div>

    <div class="row">
      <div class="col col-sm-4">
        <%= f.input :test_date, input_html: { value: f.object.localized.test_date } %>
      </div>

      <div class="col col-sm-4">
        <%= f.input :classes, as: :select2, elements: number_of_classes_elements(@number_of_classes), multiple: true, input_html: { value: f.object.classes.join(','), data: { without_json_parser: true } } %>
      </div>

      <div class="col col-sm-4">
        <% # if @avaliation.test_setting.fix_tests? %>
          <%= f.association :test_setting_test, as: :select2, elements: @avaliation.test_setting.tests %>
        <% # else %>
            <% #f.input :description %>
        <% # end %>
      </div>
    </div>

    <% # if @avaliation.test_setting.fix_tests? %>
      <div class="row">
        <div class="col col-sm-4">
          <%= f.input :description %>
        </div>

        <div class="col col-sm-4">
            <%= f.input :weight, input_html: { value: number_with_precision(f.object.weight, precision: @avaliation.test_setting.number_of_decimal_places),
                                               data: { scale: @avaliation.test_setting.number_of_decimal_places } } %>
        </div>
      </div>
    <% # end %>

  </fieldset>

  <footer>
    <%= link_to "Voltar", avaliations_path, class: "btn btn-default" %>

    <% if @avaliation.persisted? %>
      <%= link_to 'HistÃ³rico', history_avaliation_path(@avaliation), class: 'btn btn-info' %>
    <% end %>

    <%= f.submit 'Salvar', class: 'btn btn-primary' %>

  </footer>
<% end %>