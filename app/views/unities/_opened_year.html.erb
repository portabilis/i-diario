<fieldset>
  <legend><%= t('activerecord.models.school_calendar', count: 2) %></legend>

  <table class="table table-striped table-bordered table-condensed records">
    <thead>
      <tr>
        <th><%= SchoolCalendar.human_attribute_name :year %></th>
        <th><%= SchoolCalendar.human_attribute_name :opened_year %></th>
        <th class="actions" style="width: 60px;"> </th>
      </tr>
    </thead>

    <tbody id="school-calendar">
      <% @school_calendars.each do |school_calendar| %>
        <tr class="nested-fields">
          <td>
            <%= school_calendar.year %>
          </td>

          <td>
            <%= school_calendar.opened_year ? 'Aberto' : 'Fechado' %>
          </td>
          <td class="actions">
            <% if school_calendar.opened_year %>
              <%= link_to 'Fechar',
                    close_school_calendar_path(school_calendar),
                    method: :patch,
                    class: 'btn btn-success btn-sm',
                    data: {
                      confirm: "Tem certeza que deseja fechar o ano letivo #{school_calendar.year}?"
                    },
                    title: 'Fechar o ano letivo' %>
            <% else %>
              <span title="Ano letivo já está fechado.">
                <a class="btn btn-success btn-sm disabled">Fechar</a>
              </span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
    <tfoot id="paginator" class="remote">
      <td colspan="7">
        <div id="page_entries_info" class="pull-left hidden-xs">
          <%= page_entries_info @school_calendars %>
        </div>
        <div class="pull-right">
          <%= paginate @school_calendars %>
        </div>
      </td>
    </tfoot>
  </table>
</fieldset>
